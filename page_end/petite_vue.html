<script>
    /**
     * petite-vue 加载完成回调方法, 主要将 body 替换为 vue-dom 并 mount, 设置 visible 为 true.
     * @param {Element} dom 触发回调的元素, 用于触发回调后初始化 petite-vue 目录生成.
     */
    function petitevueOnload(dom) {
        if (!(!dom.readyState || dom.readyState === 'loaded' || dom.readyState === 'complete')) return
        // save to origin 
        const originBody = document.createElement('html')
        originBody.innerHTML = document.body.innerHTML
        // body html update
        document.body.innerHTML = originBody.querySelector('#page_begin_html').innerHTML
        // body css update
        document.body.classList.remove('skin-simplememory')
        document.body.classList.remove('has-navbar')
        document.body.classList.remove('mathjax2')
        document.body.classList.remove('no-navbar')
        document.body.style.visibility = 'visible'
        // body html append token
        const tokendom = originBody.querySelector('#antiforgery_token')
        document.body.appendChild(tokendom)
        // vm mount
        const vm = (window.vm = PetiteVue.reactive({}))
        vm.async = {}
        vm.header = GetHeader(originBody)
        vm.main = GetMain(originBody)
        vm.main.page = GetPage(originBody)
        PetiteVue.createApp({ vm, Header, Main, Footer, Page }).mount()
    }
</script>