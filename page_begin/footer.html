<!-- footer -->
<template id="blogure-footer">
    <small>Built with <a href="https://www.cnblogs.com/">cnblogs</a> â€¢
        <a href="https://github.com/xnuc/cnblogs-theme-blogure">source</a></small>
    <label for="switch">
        <input type="checkbox" style="position:fixed;bottom:var(--spacing);left:var(--spacing);" id="dark-switch"
            role="switch" @click="darkSwitcher($el)" :checked="localStorage.getItem('data-theme') === 'dark' ?? false">
    </label>
    <template v-if="vm.main.layout === 'post'">
        <label for="switch">
            <input type="checkbox"
                style="position:fixed;bottom:var(--spacing);right:var(--spacing);z-index:2;transform:rotate(180deg);"
                id="toc-switch" role="switch" @click="tocSwitcher($el)">
        </label>
        <aside id="toc"
            style="transition:var(--transition);transform:translate(calc(var(--spacing)*15));width:calc(var(--spacing)*15);height:100%;position:fixed;top:0;right:0;z-index:1;background-color:var(--code-kbd-color);">
        </aside>
    </template>
</template>
<script>
    function Footer() {
        return {
            $template: '#blogure-footer',
        }
    }

    function darkSwitcher(dom) {
        darkSwitcherWithStorage(dom)
        if (dom.checked) document.querySelector('html').setAttribute('data-theme', 'dark')
        if (!dom.checked) document.querySelector('html').setAttribute('data-theme', 'light')
    }

    function darkSwitcherWithStorage(dom) {
        if (!window.localStorage) return
        if (dom.checked) localStorage.setItem('data-theme', 'dark')
        if (!dom.checked) localStorage.setItem('data-theme', 'light')
    }
    if (window.localStorage) document.querySelector('html').setAttribute('data-theme', localStorage.getItem('data-theme'))

    function tocSwitcher(dom) {
        if (dom.checked) {
            document.querySelector('#toc').style.transform = 'translate(0)'
            document.querySelector('#toc').style.boxShadow = 'var(--card-box-shadow)'
        }
        if (!dom.checked) {
            document.querySelector('#toc').style.transform = 'translate(calc(var(--spacing)*15))'
            document.querySelector('#toc').style.boxShadow = ''
        }
    }
</script>